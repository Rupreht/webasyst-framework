<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>{$wa->appName()} &mdash; {$wa->title()}</title>
    {* CSS *}
    {$wa->css()}
    <link type="text/css" rel="stylesheet" href="{$wa_app_static_url}css/index.css?v={$wa->version()}">
    <link type="text/css" rel="stylesheet" href="{$wa_app_static_url}css/backend.css?v={$wa->version()}">
    <script type="text/javascript" src="{$wa_url}wa-content/js/jquery/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="{$wa_url}wa-content/js/jquery/jquery-migrate-3.3.2.min.js"></script>
    <script type="text/javascript" src="{$wa_url}wa-content/js/jquery-wa/wa.js?v={$wa->version(true)}"></script>
    
    <script>
      window.appState = {
        "baseUrl": document.location.protocol + '//' + document.location.host + "{$wa_app_url}",
        "rootUrl": "{$wa_url}",
        "user_id": "{$user_id}",
        "locale": "{substr($wa->locale(), 0, 2)}",
        "centralUrl": "{$central_url}"
      };
    </script>
</head>
<body>

    <div id="wa">

        {$wa->header()}

        <div id="app"></div>
        {*
          * Такая вставка скомпилированного SPA ломает JQ
          <script type="text/javascript" src="{$wa_app_static_url}js/index.js?v={$wa->version()}"></script>
        *}
        <script>
          $(function () {
            let spaScript = document.createElement("script");
            spaScript.setAttribute("src", "{$wa_app_static_url}js/index.js?v={$wa->version()}");
            document.body.appendChild(spaScript);
          })
        </script>

    </div>

</body>
</html>

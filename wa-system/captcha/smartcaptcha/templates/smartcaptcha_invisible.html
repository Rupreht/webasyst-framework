<script src="https://captcha-api.yandex.ru/captcha.js?render=onload&onload=onloadFunction" defer></script>

<div id="captcha-container"></div>

<script>
    function onloadFunction() {
        if (!window.smartCaptcha) {
            return;
        }

        window.smartCaptcha.render('captcha-container', {
            sitekey: '{$client_key}',
            invisible: true,
            callback: callback,
        });

        window.smartCaptcha.execute();

        $(window).trigger('wa_smartcaptcha_loaded');
    }

    function callback(token) {
        $('#captcha-container [name="smart-token"]').val(token);
    }
</script>
